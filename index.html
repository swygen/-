<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>স্বাগতম - সাইনআপ</title>
<style>
    :root {
        --bg-color: #000000;
        --card-color: rgba(255, 255, 255, 0.1);
        --border-color: rgba(255, 255, 255, 0.2);
        --text-color: #f0f0f0;
        --primary-color: #007bff;
        --transition-speed: 0.3s;
    }

    body {
        font-family: 'Arial', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        overflow-x: hidden;
    }

    .auth-container {
        width: 100%;
        max-width: 400px;
        background: var(--card-color);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 20px;
        border: 1px solid var(--border-color);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        padding: 30px;
        transition: all var(--transition-speed) ease-in-out;
    }

    h2 {
        text-align: center;
        margin-bottom: 30px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        opacity: 0.8;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"] {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background-color: rgba(255, 255, 255, 0.05);
        color: var(--text-color);
        box-sizing: border-box;
        transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
    }

    input:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.3);
    }

    button[type="submit"] {
        width: 100%;
        padding: 12px;
        background-color: var(--primary-color);
        color: var(--bg-color);
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: background-color var(--transition-speed), transform var(--transition-speed);
    }

    button[type="submit"]:hover {
        background-color: #0056b3;
        transform: translateY(-2px);
    }

    #notification-area {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
    }

</style>
</head>

<body>
<div class="auth-container">
    <h2>ব্যবহারকারী প্রমাণীকরণ</h2>

    <!-- শুধুমাত্র সাইনআপ ফর্ম -->
    <form id="signup-form" class="auth-form">
        <div class="form-group">
            <label for="signup-name">নাম</label>
            <input type="text" id="signup-name" required placeholder="আপনার সম্পূর্ণ নাম">
        </div>
        <div class="form-group">
            <label for="signup-email">ইমেইল</label>
            <input type="email" id="signup-email" required placeholder="আপনার ইমেইল">
        </div>
        <div class="form-group">
            <label for="signup-password">পাসওয়ার্ড</label>
            <input type="password" id="signup-password" required placeholder="একটি পাসওয়ার্ড লিখুন">
        </div>
        <button type="submit">সাইনআপ করুন</button>
    </form>

    <div id="notification-area"></div>
</div>

<script type="module">
    // --- Firebase Config ---
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCCR-mGB4rkQp0yr_H3yMTocwfRlSFtLN8",
        authDomain: "red-chili-bot.firebaseapp.com",
        projectId: "red-chili-bot",
        storageBucket: "red-chili-bot.firebasestorage.app",
        messagingSenderId: "125399502243",
        appId: "1:125399502243:web:e2642cbbd3675622379e16",
        measurementId: "G-ETBNKN4N9B"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const signupForm = document.getElementById('signup-form');
    const notificationArea = document.getElementById('notification-area');

    function showNotification(message, type = 'success') {
        const toast = document.createElement('div');
        toast.textContent = message;
        toast.style.cssText = `
            padding: 10px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            color: #fff;
            background-color: ${type === 'error' ? '#dc3545' : '#28a745'};
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        `;
        notificationArea.prepend(toast);
        setTimeout(() => { toast.style.opacity = 1; }, 10);
        setTimeout(() => { toast.style.opacity = 0; }, 4000);
        setTimeout(() => { toast.remove(); }, 4500);
    }

    // --- Redirect if user already exists ---
    auth.onAuthStateChanged(async (user) => {
        if (user) {
            // ইউজার লগইন বা সাইনআপ থাকলে সরাসরি ড্যাশবোর্ডে পাঠাবে
            window.location.href = 'dashboard.html';
        }
    });

    // --- Signup Function ---
    signupForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const name = signupForm['signup-name'].value;
        const email = signupForm['signup-email'].value;
        const password = signupForm['signup-password'].value;

        try {
            const userCredential = await createUserWithEmailAndPassword(auth, email, password);
            const user = userCredential.user;

            await setDoc(doc(db, "users", user.uid), {
                name: name,
                email: email,
                balance: 50
            });

            showNotification('সাইনআপ সফল! ড্যাশবোর্ডে যাচ্ছেন...', 'success');
            setTimeout(() => window.location.href = 'dashboard.html', 1000);
        } catch (error) {
            showNotification('সাইনআপ ব্যর্থ: এই ইমেইলটি ইতিমধ্যেই ব্যবহৃত।', 'error');
        }
    });

</script>
</body>
</html>
